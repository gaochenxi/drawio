<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="936px" height="1884px" viewBox="-0.5 -0.5 936 1884" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-04-03T03:54:27.246Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36&quot; etag=&quot;bTG5Il3EPOeqbi1_WVcu&quot; version=&quot;21.1.1&quot; type=&quot;github&quot;&gt;&#10;  &lt;diagram name=&quot;Page-1&quot; id=&quot;e7e014a7-5840-1c2e-5031-d8a46d1fe8dd&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1850&quot; dy=&quot;879&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;1169&quot; pageHeight=&quot;826&quot; background=&quot;none&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;2&quot; value=&quot;Thread 1&quot; style=&quot;swimlane;whiteSpace=wrap&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;164.5&quot; y=&quot;128&quot; width=&quot;280&quot; height=&quot;570&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;5&quot; value=&quot;&quot; style=&quot;ellipse;shape=startState;fillColor=#000000;strokeColor=#ff0000;&quot; parent=&quot;2&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;100&quot; y=&quot;40&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;6&quot; value=&quot;&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;2&quot; source=&quot;5&quot; target=&quot;7&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;100&quot; y=&quot;40&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;115&quot; y=&quot;110&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;7&quot; value=&quot;idle&quot; style=&quot;&quot; parent=&quot;2&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;110&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;8&quot; value=&quot;user action&quot; style=&quot;&quot; parent=&quot;2&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;220&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;9&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;2&quot; source=&quot;7&quot; target=&quot;8&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;10&quot; value=&quot;post command&quot; style=&quot;&quot; parent=&quot;2&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;325&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;11&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;2&quot; source=&quot;8&quot; target=&quot;10&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;12&quot; value=&quot;&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;strokeColor=#FF0000;endArrow=open;endFill=1;rounded=0&quot; parent=&quot;2&quot; source=&quot;10&quot; target=&quot;7&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;100&quot; height=&quot;100&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;160&quot; y=&quot;290&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;260&quot; y=&quot;190&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;30&quot; y=&quot;250&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;3&quot; value=&quot;Thread 2&quot; style=&quot;swimlane;whiteSpace=wrap&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;444.5&quot; y=&quot;128&quot; width=&quot;280&quot; height=&quot;570&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;13&quot; value=&quot;&quot; style=&quot;ellipse;shape=startState;fillColor=#000000;strokeColor=#ff0000;&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;60&quot; y=&quot;40&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;14&quot; value=&quot;&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;13&quot; target=&quot;15&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;40&quot; y=&quot;20&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;55&quot; y=&quot;90&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;15&quot; value=&quot;idle&quot; style=&quot;&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;20&quot; y=&quot;110&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;16&quot; value=&quot;check for &amp;#xa;new commands&quot; style=&quot;&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;20&quot; y=&quot;220&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;17&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;15&quot; target=&quot;16&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;18&quot; value=&quot;command queue&quot; style=&quot;&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;20&quot; y=&quot;325&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;19&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;16&quot; target=&quot;18&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;21&quot; value=&quot;queue empty&quot; style=&quot;rhombus;fillColor=#ffffc0;strokeColor=#ff0000;&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;150&quot; y=&quot;225&quot; width=&quot;80&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;22&quot; value=&quot;yes&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#FF0000;exitX=0.5;exitY=0;endFill=1;rounded=0;entryX=0.75;entryY=0.5;entryPerimeter=0&quot; parent=&quot;3&quot; source=&quot;21&quot; target=&quot;25&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;160&quot; y=&quot;150&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;190&quot; y=&quot;180&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;23&quot; value=&quot;no&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;21&quot; target=&quot;30&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;190&quot; y=&quot;305&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;24&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;16&quot; target=&quot;21&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;25&quot; value=&quot;&quot; style=&quot;shape=line;strokeWidth=6;strokeColor=#ff0000;rotation=90&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;130&quot; y=&quot;127.5&quot; width=&quot;50&quot; height=&quot;15&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;26&quot; value=&quot;&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;25&quot; target=&quot;15&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;130&quot; y=&quot;90&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;230&quot; y=&quot;140&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;30&quot; value=&quot;dispatch&amp;#xa;command&amp;#xa;worker thread&quot; style=&quot;&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;140&quot; y=&quot;325&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;31&quot; value=&quot;critical&amp;#xa;section&quot; style=&quot;shape=note;whiteSpace=wrap;size=17&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;105&quot; y=&quot;490&quot; width=&quot;100&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;32&quot; value=&quot;&quot; style=&quot;endArrow=none;strokeColor=#FF0000;endFill=0;rounded=0;dashed=1&quot; parent=&quot;3&quot; source=&quot;18&quot; target=&quot;31&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;34&quot; value=&quot;&quot; style=&quot;whiteSpace=wrap;strokeColor=#FF0000;fillColor=#FF0000&quot; parent=&quot;3&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;245&quot; y=&quot;395&quot; width=&quot;5&quot; height=&quot;45&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;41&quot; value=&quot;&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;entryX=0;entryY=0.5;strokeColor=#FF0000;endArrow=open;endFill=1;rounded=0&quot; parent=&quot;3&quot; source=&quot;30&quot; target=&quot;34&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;100&quot; height=&quot;100&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;60&quot; y=&quot;480&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;160&quot; y=&quot;380&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;195&quot; y=&quot;400&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;4&quot; value=&quot;Thread 3&quot; style=&quot;swimlane;whiteSpace=wrap&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;724.5&quot; y=&quot;128&quot; width=&quot;280&quot; height=&quot;570&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;33&quot; value=&quot;process&amp;#xa;command&quot; style=&quot;&quot; parent=&quot;4&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;90&quot; y=&quot;405&quot; width=&quot;110&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;35&quot; value=&quot;&quot; style=&quot;edgeStyle=elbowEdgeStyle;elbow=horizontal;strokeColor=#FF0000;endArrow=open;endFill=1;rounded=0;entryX=0.25;entryY=0.5;entryPerimeter=0&quot; parent=&quot;4&quot; target=&quot;25&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;100&quot; height=&quot;100&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;-30&quot; y=&quot;410&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;-120&quot; y=&quot;120&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;-10&quot; y=&quot;135&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;37&quot; value=&quot;&quot; style=&quot;edgeStyle=none;strokeColor=#FF0000;endArrow=open;endFill=1;rounded=0&quot; parent=&quot;4&quot; target=&quot;33&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;100&quot; height=&quot;100&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;-30&quot; y=&quot;429.5&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;90&quot; y=&quot;429.5&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;38&quot; value=&quot;&quot; style=&quot;ellipse;shape=endState;fillColor=#000000;strokeColor=#ff0000&quot; parent=&quot;4&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;130&quot; y=&quot;500&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;39&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;4&quot; source=&quot;33&quot; target=&quot;38&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;20&quot; value=&quot;&quot; style=&quot;endArrow=open;strokeColor=#FF0000;endFill=1;rounded=0&quot; parent=&quot;1&quot; source=&quot;10&quot; target=&quot;18&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-43&quot; value=&quot;&quot; style=&quot;ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;585&quot; y=&quot;1050&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-44&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-43&quot; parent=&quot;1&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-45&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;585&quot; y=&quot;1140&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-49&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-45&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-46&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-45&quot; value=&quot;查询search_expression&quot; style=&quot;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;530&quot; y=&quot;1130&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-46&quot; value=&quot;新元素&quot; style=&quot;rhombus;whiteSpace=wrap;html=1;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;560&quot; y=&quot;1239&quot; width=&quot;80&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-47&quot; value=&quot;no&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-46&quot; parent=&quot;1&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-50&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;740&quot; y=&quot;1259&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-48&quot; value=&quot;yes&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.486;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-46&quot; parent=&quot;1&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-51&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;600&quot; y=&quot;1339&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-55&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.493;entryY=-0.04;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-50&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-54&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-50&quot; value=&quot;update_Index&amp;#xa;1.增量索引更新&quot; style=&quot;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;710&quot; y=&quot;1340&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-53&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.493;entryY=-0.04;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-51&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-52&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-51&quot; value=&quot;update_Index&amp;#xa;1.全量索引更新&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;532&quot; y=&quot;1340&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-57&quot; style=&quot;edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;elbow=vertical;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-52&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-56&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-52&quot; value=&quot;insert_doc&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;533&quot; y=&quot;1450&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-58&quot; style=&quot;edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;elbow=vertical;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-54&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-56&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-54&quot; value=&quot;update_doc&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;711&quot; y=&quot;1449&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-56&quot; value=&quot;&quot; style=&quot;ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;677&quot; y=&quot;1600&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-64&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=-0.017;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-59&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-63&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-59&quot; value=&quot;根据变化的字段&amp;#xa;判断需要更新的索引&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;70&quot; y=&quot;1440&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-61&quot; value=&quot;&quot; style=&quot;ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;125&quot; y=&quot;1350&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-62&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;&quot; edge=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-61&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;140&quot; y=&quot;1440&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-63&quot; value=&quot;Loop：更新每个索引&quot; style=&quot;whiteSpace=wrap;html=1;fillColor=rgb(255, 255, 255);strokeColor=rgb(0, 0, 0);fontColor=rgb(0, 0, 0);&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;80&quot; y=&quot;1565&quot; width=&quot;120&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-66&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-67&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-72&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;390&quot; y=&quot;1683.98&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-67&quot; value=&quot;根据参数标签判断&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;320&quot; y=&quot;1560&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-68&quot; value=&quot;&quot; style=&quot;ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;375&quot; y=&quot;1470&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-69&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-68&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;390&quot; y=&quot;1560&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-72&quot; value=&quot;正排是否存在&quot; style=&quot;rhombus;whiteSpace=wrap;html=1;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;350&quot; y=&quot;1680&quot; width=&quot;80&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-73&quot; value=&quot;yes&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0.02;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-72&quot; parent=&quot;1&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-91&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;530&quot; y=&quot;1700&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;mxPoint as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-74&quot; value=&quot;no&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0.02;entryDx=0;entryDy=0;entryPerimeter=0;&quot; edge=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-72&quot; parent=&quot;1&quot; target=&quot;CeUPjKVIslIrqgbFiqzm-76&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;390&quot; y=&quot;1780&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;mxPoint as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-88&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-76&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;390&quot; y=&quot;1870&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-76&quot; value=&quot;删除doc里维护的老索引&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;320&quot; y=&quot;1780&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-89&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-77&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;390&quot; y=&quot;1960&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-77&quot; value=&quot;更新doc中的新索引&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;320&quot; y=&quot;1870&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-80&quot; value=&quot;更新doc中的新字段&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;320&quot; y=&quot;1960&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-90&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;CeUPjKVIslIrqgbFiqzm-91&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;600&quot; y=&quot;1870&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-91&quot; value=&quot;更新doc中的新索引&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;530&quot; y=&quot;1780&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-92&quot; value=&quot;更新doc中的新字段&quot; style=&quot;align=center;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;530&quot; y=&quot;1870&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-93&quot; value=&quot;1. search_exp 是否只有一个主键字段&amp;#xa;2. search(node_id) == 0&quot; style=&quot;align=left;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;140&quot; y=&quot;1130&quot; width=&quot;260&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-94&quot; value=&quot;update_index流程&quot; style=&quot;align=left;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;80&quot; y=&quot;1279&quot; width=&quot;150&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;CeUPjKVIslIrqgbFiqzm-95&quot; value=&quot;inser/update doc流程&quot; style=&quot;align=left;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;315&quot; y=&quot;1399&quot; width=&quot;150&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;" resource="https://app.diagrams.net/?libs=general;uml#Hgaochenxi%2Fdrawio%2Fmain%2Fupdate%E6%8E%A5%E5%8F%A3%E6%B5%81%E7%A8%8B%E5%9B%BE.drawio.svg"><defs/><g><path d="M 94.5 23 L 94.5 0 L 374.5 0 L 374.5 23" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 94.5 23 L 94.5 570 L 374.5 570 L 374.5 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 94.5 23 L 374.5 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 12px; margin-left: 96px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; overflow-wrap: normal;">Thread 1</div></div></div></foreignObject><text x="235" y="15" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Thread 1</text></switch></g><ellipse cx="209.5" cy="55" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><path d="M 209.5 70 L 210 90 L 209.52 132.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 205.11 124.83 L 209.51 133.88 L 214.11 124.93" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><rect x="154.5" y="110" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="209" y="139.5">idle</text></g><rect x="154.5" y="220" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="209" y="249.5">user action</text></g><path d="M 209.5 135 L 209.5 242.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 206 236.88 L 209.5 243.88 L 213 236.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><rect x="154.5" y="325" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="209" y="354.5">post command</text></g><path d="M 209.5 245 L 209.5 347.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 206 341.88 L 209.5 348.88 L 213 341.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 209.5 350 L 124.5 350 L 124.5 135 L 207.26 135" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 201.38 138.5 L 208.38 135 L 201.38 131.5" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 374.5 23 L 374.5 0 L 654.5 0 L 654.5 23" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 374.5 23 L 374.5 570 L 654.5 570 L 654.5 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 374.5 23 L 654.5 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 12px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; overflow-wrap: normal;">Thread 2</div></div></div></foreignObject><text x="515" y="15" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Thread 2</text></switch></g><ellipse cx="449.5" cy="55" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><path d="M 449.5 70 L 450 90 L 449.52 132.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 445.11 124.83 L 449.51 133.88 L 454.11 124.93" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><rect x="394.5" y="110" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="449" y="139.5">idle</text></g><rect x="394.5" y="220" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="449" y="242.5">check for </text><text x="449" y="256.5">new commands</text></g><path d="M 449.5 135 L 449.5 242.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 446 236.88 L 449.5 243.88 L 453 236.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><rect x="394.5" y="325" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="449" y="354.5">command queue</text></g><path d="M 449.5 245 L 449.5 347.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 446 341.88 L 449.5 348.88 L 453 341.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 564.5 225 L 604.5 245 L 564.5 265 L 524.5 245 Z" fill="#ffffc0" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="564" y="249.5">queue empty</text></g><path d="M 564.5 225 L 564.5 147.5 L 531.74 147.5" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 539.62 143 L 530.62 147.5 L 539.62 152" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="566" y="209" width="21" height="15" stroke-width="0"/><text x="566" y="219.5">yes</text></g><path d="M 565 264.75 L 565 295 L 569.32 347.77" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 564.19 340.28 L 569.41 348.89 L 573.16 339.55" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="566" y="272" width="15" height="15" stroke-width="0"/><text x="566.5" y="281.25">no</text></g><path d="M 449.5 245 L 522.26 245" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 516.38 248.5 L 523.38 245 L 516.38 241.5" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 504.5 135 L 554.5 135" fill="none" stroke="#ff0000" stroke-width="6" stroke-miterlimit="10" transform="rotate(90,529.5,135)" pointer-events="none"/><path d="M 522 135.15 L 504.5 135.5 L 451.74 135.02" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 459.66 130.59 L 450.62 135.01 L 459.58 139.59" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><rect x="514.5" y="325" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="569" y="340.5">dispatch</text><text x="569" y="354.5">command</text><text x="569" y="368.5">worker thread</text></g><path d="M 479.5 490 L 562.5 490 L 579.5 507 L 579.5 540 L 479.5 540 L 479.5 490 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 562.5 490 L 562.5 507 L 579.5 507" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 515px; margin-left: 481px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">critical<br />section</div></div></div></foreignObject><text x="530" y="519" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">critical...</text></switch></g><path d="M 449.5 350 L 517.38 490" fill="none" stroke="#ff0000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><rect x="619.5" y="395" width="5" height="45" fill="#ff0000" stroke="#ff0000" pointer-events="none"/><path d="M 569.5 350 L 569.5 417.5 L 617.26 417.5" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 611.38 421 L 618.38 417.5 L 611.38 414" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 654.5 23 L 654.5 0 L 934.5 0 L 934.5 23" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 654.5 23 L 654.5 570 L 934.5 570 L 934.5 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 654.5 23 L 934.5 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 12px; margin-left: 655px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; overflow-wrap: normal;">Thread 3</div></div></div></foreignObject><text x="794" y="15" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Thread 3</text></switch></g><rect x="744.5" y="405" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="799" y="427.5">process</text><text x="799" y="441.5">command</text></g><path d="M 624.5 410 L 644.5 410 L 644.5 122.5 L 531.74 122.5" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 537.62 119 L 530.62 122.5 L 537.62 126" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 624.5 429.5 L 797.26 429.99" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 791.37 433.48 L 798.38 430 L 791.39 426.48" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><ellipse cx="799.5" cy="515" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><ellipse cx="799.5" cy="515" rx="15" ry="15" fill="none" stroke="#ff0000" pointer-events="none"/><path d="M 799.5 430 L 799.5 497.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 796 491.88 L 799.5 498.88 L 803 491.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 209.5 350 L 447.26 350" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 441.38 353.5 L 448.38 350 L 441.38 346.5" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><ellipse cx="530" cy="937" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><path d="M 530 952 L 530 999.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 525.5 991.88 L 530 1000.88 L 534.5 991.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1027 L 530 1104.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1109.88 L 526.5 1102.88 L 530 1104.63 L 533.5 1102.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="460" y="1002" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="529.5" y="1031.5">查询search_expression</text></g><path d="M 530 1111 L 570 1131 L 530 1151 L 490 1131 Z" fill="#ffffc0" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1131px; margin-left: 491px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">新元素</div></div></div></foreignObject><text x="530" y="1135" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">新元素</text></switch></g><path d="M 570 1131 L 710 1131 L 710 1209.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 705.5 1201.88 L 710 1210.88 L 714.5 1201.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1128px; margin-left: 572px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">no</div></div></div></foreignObject><text x="572" y="1128" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">no</text></switch></g><path d="M 530.04 1150.98 L 530.04 1209.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 525.54 1201.88 L 530.04 1210.88 L 534.54 1201.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1158px; margin-left: 532px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">yes</div></div></div></foreignObject><text x="532" y="1169" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">yes</text></switch></g><path d="M 710 1237 L 710.02 1312.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 710.02 1317.88 L 706.52 1310.88 L 710.02 1312.63 L 713.52 1310.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="640" y="1212" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="709.5" y="1234.5">update_Index</text><text x="709.5" y="1248.5">1.增量索引更新</text></g><path d="M 532 1237 L 532.02 1313.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 532.02 1318.88 L 528.52 1311.88 L 532.02 1313.63 L 535.52 1311.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="462" y="1212" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="531.5" y="1234.5">update_Index</text><text x="531.5" y="1248.5">1.全量索引更新</text></g><path d="M 533 1347 L 533 1429.25 L 607 1429.25 L 607 1480.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 607 1485.88 L 603.5 1478.88 L 607 1480.63 L 610.5 1478.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="463" y="1322" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="532.5" y="1351.5">insert_doc</text></g><path d="M 711 1346 L 711 1429.25 L 637 1429.25 L 637 1480.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 637 1485.88 L 633.5 1478.88 L 637 1480.63 L 640.5 1478.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="641" y="1321" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="710.5" y="1350.5">update_doc</text></g><ellipse cx="622" cy="1487" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><ellipse cx="622" cy="1487" rx="15" ry="15" fill="none" stroke="#ff0000" pointer-events="none"/><path d="M 70 1337 L 70 1429.61" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 70 1434.86 L 66.5 1427.86 L 70 1429.61 L 73.5 1427.86 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="0" y="1312" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="69.5" y="1334.5">根据变化的字段</text><text x="69.5" y="1348.5">判断需要更新的索引</text></g><ellipse cx="70" cy="1237" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><path d="M 70 1252 L 70 1309.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 65.5 1301.88 L 70 1310.88 L 74.5 1301.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><rect x="10" y="1437" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1467px; margin-left: 11px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Loop：更新每个索引</div></div></div></foreignObject><text x="70" y="1471" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Loop：更新每个索引</text></switch></g><path d="M 320 1457 L 320 1545.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 320 1550.88 L 316.5 1543.88 L 320 1545.63 L 323.5 1543.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="250" y="1432" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="319.5" y="1461.5">根据参数标签判断</text></g><ellipse cx="320" cy="1357" rx="11" ry="11" fill="#000000" stroke="#ff0000" pointer-events="none"/><path d="M 320 1372 L 320 1429.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 315.5 1421.88 L 320 1430.88 L 324.5 1421.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 320 1552 L 360 1572 L 320 1592 L 280 1572 Z" fill="#ffffc0" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1572px; margin-left: 281px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">正排是否存在</div></div></div></foreignObject><text x="320" y="1576" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">正排是否存在</text></switch></g><path d="M 360 1572 L 530 1572 L 530 1650.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 525.5 1642.88 L 530 1651.88 L 534.5 1642.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1569px; margin-left: 362px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">yes</div></div></div></foreignObject><text x="362" y="1569" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">yes</text></switch></g><path d="M 320 1592 L 320 1650.76" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><path d="M 315.5 1642.88 L 320 1651.88 L 324.5 1642.88" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1599px; margin-left: 322px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">no</div></div></div></foreignObject><text x="322" y="1610" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">no</text></switch></g><path d="M 320 1677 L 320 1735.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 320 1740.88 L 316.5 1733.88 L 320 1735.63 L 323.5 1733.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="250" y="1652" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="319.5" y="1681.5">删除doc里维护的老索引</text></g><path d="M 320 1767 L 320 1825.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 320 1830.88 L 316.5 1823.88 L 320 1825.63 L 323.5 1823.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="250" y="1742" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="319.5" y="1771.5">更新doc中的新索引</text></g><rect x="250" y="1832" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="319.5" y="1861.5">更新doc中的新字段</text></g><path d="M 530 1677 L 530 1735.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1740.88 L 526.5 1733.88 L 530 1735.63 L 533.5 1733.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="460" y="1652" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="529.5" y="1681.5">更新doc中的新索引</text></g><rect x="460" y="1742" width="140" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="529.5" y="1771.5">更新doc中的新字段</text></g><rect x="70" y="1002" width="260" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" font-size="12px"><text x="71.5" y="1024.5">1. search_exp 是否只有一个主键字段</text><text x="71.5" y="1038.5">2. search(node_id) == 0</text></g><rect x="10" y="1151" width="150" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" font-size="12px"><text x="11.5" y="1180.5">update_index流程</text></g><rect x="245" y="1271" width="150" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" font-size="12px"><text x="246.5" y="1300.5">inser/update doc流程</text></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>